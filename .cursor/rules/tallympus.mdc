---
alwaysApply: true
---

# ANIMON.GG

This file is for coding agents working in this repo. Follow it literally.

## Project context

-   **Animon (`<animon.gg>`) is a SaaS app**: It's the letterboxd for anime. It aims to make the life of all anime fans easier, from the most important which is episode tracking, to custom lists, recommendations, and calendar for next episode airings.
-   **Operate like a cofounder.** Optimize for user value and speed, without compromising basic maintainability.

## Non‑negotiables

-   **Do not overwrite user edits.** The user may change code between messages. If something changed, understand _why_ and build on it.
-   **Keep changes simple.** Implement the smallest change that solves the problem (unless you’re writing tests).
-   **Fix root causes.** When debugging, gather enough info to understand the failure and fix it at the source (not via band-aids).

---

## Architecture & structure (Laravel)

-   **Prefer small, verb-named Actions.** Avoid generic “Service/Manager/Handler” classes.
-   **Controllers stay thin.** Single-action controllers are preferred.
-   **Avoid events unless necessary.** Keep code flow obvious without jumping between files.
-   **Jobs are thin + idempotent.** Delegate business logic to Actions.
-   **If you create a model, also create a factory + seeder.**
-   **Api Consumption should be strictly done with the methods of the Consuming Apis Book** with heavily relying on the Saloon package. Check previous integrations and copy or expand.

---

## Architecture & structure (Livewire)

-   Use Livewire for dynamic components and real-time user interactions.
-   Favor the use of Livewire's lifecycle hooks and properties.
-   Use the latest Livewire (3.5+) features for optimization and reactivity.
-   Implement Blade components with Livewire directives (e.g., wire:model).
-   Handle state management and form handling using Livewire properties and actions.
-   Use wire:loading and wire:target to provide feedback and optimize user experience.
-   Apply Livewire's security measures for components.

---

## Frontend (Blade + Tailwind + Alpine)

-   **HTML must be tidy, valid, semantic, and accessible.**
-   **Close inline tags** (`<meta />`, `<img />`, `<br />`, …).
-   **Prefer landmarks** (`header`, `nav`, `main`, `footer`) over generic wrappers.
-   **Keep focus outlines.** Focus states should be visible and intentional.
-   **Every input needs a `<label>`** (via `for` + `id`) unless there’s a strong reason.
-   **Icons:** decorative icons get `aria-hidden="true"`; informative icons need an accessible name.
-   **Use Flux Components** wherever possible to minimize custom component creation

### What I Hate and it makes me not want to code.

When the html files are a bloated mess without component use and i need to scroll like 5 times to go the section i want.

### Styling (Tailwind v4)

-   Prefer Tailwind utilities over custom CSS.
-   If custom CSS is necessary, keep it minimal and document why.
-   Extract repeated UI patterns into Blade components (don’t copy/paste huge class strings).

### Interactivity (Alpine.js in Blade)

-   Alpine code belongs in the Blade component.
-   Use `x-cloak` to avoid flashes during init.
-   Keep state small and local (avoid hidden global state).
-   Keep ARIA attributes in sync with state (e.g. `aria-expanded`).

### Readability conventions (Blade)

-   When an element has many attributes, format them one per line.
-   Top-of-file Blade comment blocks use:
    -   `{{--` on its own line,
    -   A capitalized sentence ending in a period,
    -   `--}}` on its own line.

---

## Testing (Pest)

-   Test files mirror `./app` structure 1:1 when possible.
    -   If there is no matching `app/` file, only then place tests at the root (e.g. `./tests/Feature`) with a clear justification.
-   Avoid hardcoded hosts/URLs; prefer `route()` / `url()`.
-   Prefer strict fakes over permissive mocks.
-   Tests must be parallel-safe: avoid shared fixed file paths and clean up created files.
-   Import Pest global functions (e.g. `use function Pest\Laravel\actingAs;`).
-   Avoid `$this` in Pest tests; prefer the equivalent global functions.
-   Use Real-Time Facades if you need to mock something resolved from the container.
